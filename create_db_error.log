
-------
03/07/2018 19:07:58
-------


-------
03/20/2018 19:20:42
-------


-------
03/24/2018 19:24:37
-------


-------
03/08/2018 20:08:27
-------


-------
03/56/2018 22:56:50
-------


-------
03/17/2018 23:17:54
-------


-------
03/35/2018 23:35:26
-------


-------
04/10/2018 00:10:34
-------


-------
04/11/2018 00:11:48
-------


-------
04/19/2018 00:19:24
-------


-------
04/24/2018 00:24:42
-------


-------
04/55/2018 09:55:49
-------


-------
04/34/2018 10:34:48
-------


-------
04/42/2018 11:42:26
-------


-------
04/27/2018 21:27:52
-------


-------
04/37/2018 21:37:19
-------


-------
05/12/2018 08:12:13
-------


-------
07/49/2018 10:49:32
-------

Error executing 'insert into dangnhap(tentaikhoan, matkhau,phanquyen,manhanvien)
values ('admin','123',1,1) ' (line 225): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`dangnhap`, CONSTRAINT `dangnhap_ibfk_1` FOREIGN KEY (`manhanvien`) REFERENCES `nhanvien` (`manhanvien`))
Error executing '' (line 466): Can not issue empty query.

-------
07/53/2018 10:53:57
-------

Error executing 'insert into nhacungcap(tennhacungcap,diachi,email,ghichu,trangthai)
values ('Shinhan','10 Phạm Ngũ Lão Q.1 TpHCM','Shinhan@gmail.com','nhà cung cấp hàn quốc',1) ' (line 477): Unknown column 'tennhacungcap' in 'field list'
Error executing 'insert into nhacungcap(tennhacungcap,diachi,email,ghichu,trangthai)
values ('Hà Nam','15 Trần Hưng Đạo Q5 TpHCM','Uranium@gmail.com','',1) ' (line 479): Unknown column 'tennhacungcap' in 'field list'
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Áo khoác kaki','Nike','Áo','',15,50,3) ' (line 492): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Áo thun tay dài','Hermes','Áo','',15,40,3) ' (line 496): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Áo thun tay ngắn','Nike','Áo','',15,40,3) ' (line 500): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Quần jean ống dài','Hermes','Quần','',10,40,2) ' (line 504): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Quần jean ôm','Hermes','Quần','',10,40,2) ' (line 508): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Quần kaki','Nike','Quần','',10,40,2) ' (line 512): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Quần short thun','Nike','Quần','',10,40,2) ' (line 516): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))

-------
07/56/2018 10:56:11
-------

Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Áo khoác kaki','Nike','Áo','',15,50,3) ' (line 492): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Áo thun tay dài','Hermes','Áo','',15,40,3) ' (line 496): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Áo thun tay ngắn','Nike','Áo','',15,40,3) ' (line 500): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Quần jean ống dài','Hermes','Quần','',10,40,2) ' (line 504): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Quần jean ôm','Hermes','Quần','',10,40,2) ' (line 508): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Quần kaki','Nike','Quần','',10,40,2) ' (line 512): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))
Error executing 'insert into sanpham(masanpham, tensanpham,tennhasanxuat,tennhomhang,ghichu,
tonkhotoithieu,tonkhotoida,thoihan_thang)
values (GenerateLicensePlate(),'Quần short thun','Nike','Quần','',10,40,2) ' (line 516): Cannot add or update a child row: a foreign key constraint fails (`clothesshop`.`sanpham`, CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`tennhasanxuat`) REFERENCES `nhasanxuat` (`tennhasanxuat`))

-------
07/00/2018 11:00:32
-------

Error executing 'use clothesshop ' (line 3): Unknown database 'clothesshop'
Error executing 'create table cuahang
(
id int primary key,
tencuahang nvarchar(50),
diachi nvarchar(100), 
sodienthoai nvarchar(15),
email nvarchar(50)
) ' (line 12): No database selected
Error executing 'create table nhacungcap
(
manhacungcap INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
tencungcap nvarchar(30) NOT NULL,
diachi nvarchar(35) NOT NULL,
email nvarchar(20),
ghichu nvarchar(50),
trangthai int
) ' (line 22): No database selected
Error executing 'create table nhanvien
(
manhanvien INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
tennhanvien nvarchar(40) not null,
diachi nvarchar(35) not null,
gioitinh int not null,
ngaysinh datetime,
cmnd varchar(13),
trangthai int,
luong int 
) ' (line 34): No database selected
Error executing 'create table nhomhang
(
tennhomhang nvarchar(30) COLLATE utf8_unicode_ci primary key,
trangthai int
) ' (line 40): No database selected
Error executing 'create table nhasanxuat
(
tennhasanxuat nvarchar(50) COLLATE utf8_unicode_ci primary key,
trangthai int
) ' (line 46): No database selected
Error executing 'create table sanpham
(
masanpham char(8) primary key,
tensanpham nvarchar(30),
tennhasanxuat nvarchar(50) COLLATE utf8_unicode_ci,
tennhomhang nvarchar(30) COLLATE utf8_unicode_ci,
FOREIGN KEY (tennhasanxuat)
REFERENCES nhasanxuat(tennhasanxuat),
FOREIGN KEY (tennhomhang)
REFERENCES nhomhang(tennhomhang),
ghichu nvarchar(100),
giaban INT,
tonkhotoithieu int,
tonkhotoida int,
thoihan_thang int,
ngayhethan date
) ' (line 64): No database selected
Error executing 'CREATE FUNCTION GenerateLicensePlate()
    RETURNS CHAR(8)
    BEGIN
    DECLARE plate CHAR(8) DEFAULT "" ;
    WHILE LENGTH(plate) = 0 DO
        SELECT concat('S',
                'P',
                substring('ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789', rand()*36+1, 1),
                substring('ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789', rand()*36+1, 1),
                substring('ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789', rand()*36+1, 1),
                substring('ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789', rand()*36+1, 1),
                substring('ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789', rand()*36+1, 1),
                substring('ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789', rand()*36+1, 1)
                ) into @newplate;
        SET @rcount = -1;
        SELECT COUNT(*) INTO @rcount FROM `sanpham` WHERE `masanpham` = @newplate ;
        IF @rcount = 0 THEN
            SET plate = @newplate ;
        END IF ;
    END WHILE ;
    RETURN plate ;
    END ' (line 91): No database selected
Error executing 'create table mausac
(
tenmau nvarchar(30) Collate utf8_unicode_ci primary key,
trangthai int(2)
) ' (line 98): No database selected
Error executing 'create table size
(
tensize char(8) primary key,
trangthai int(2)
) ' (line 104): No database selected
Error executing 'create table chitietsanpham
(
machitietsanpham varchar(45)  PRIMARY KEY,
masanpham char(8),
FOREIGN KEY (masanpham)
REFERENCES sanpham(masanpham),
tensize char(5),
tenmau nvarchar(30)  Collate utf8_unicode_ci,
FOREIGN KEY (tensize)
REFERENCES size(tensize),
FOREIGN KEY (tenmau)
REFERENCES mausac(tenmau),
gioitinh int,
soluong int
) ' (line 120): No database selected
Error executing 'create table hoadonmuahang
(
mahoadonmuahang INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
ngaynhap datetime,
manhacungcap INT(6) UNSIGNED,
FOREIGN KEY (manhacungcap)
REFERENCES nhacungcap(manhacungcap),
tongtien int
) ' (line 131): No database selected
Error executing 'create table chitiethoadonmuahang
(
machitiethoadonmuahang INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
masanpham char(8),
FOREIGN KEY (masanpham)
REFERENCES sanpham(masanpham),
soluongsanphamnhap int,
giavon int,
thanhtien int,
mahoadonmuahang  INT(6) UNSIGNED,
FOREIGN KEY (mahoadonmuahang)
REFERENCES hoadonmuahang(mahoadonmuahang)
) ' (line 145): No database selected
Error executing 'create table nhapkho 
(
manhapkho   int(6) unsigned auto_increment  PRIMARY KEY,
manhanvien int(6) unsigned,
mahoadonmuahang  INT(6) UNSIGNED,
FOREIGN KEY (mahoadonmuahang)
REFERENCES hoadonmuahang(mahoadonmuahang),
FOREIGN KEY (manhanvien)
REFERENCES nhanvien(manhanvien)
) ' (line 158): No database selected
Error executing 'create table chitietnhapkho
(
machitietnhapkho int (6) unsigned auto_increment  PRIMARY KEY,
manhapkho  int(6) unsigned,
machitietsanpham varchar(45),
soluong int,
FOREIGN KEY (machitietsanpham)
REFERENCES chitietsanpham(machitietsanpham),
FOREIGN KEY (manhapkho)
REFERENCES nhapkho(manhapkho)
) ' (line 170): No database selected
Error executing 'create table hoadon
(
mahoadon   INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
manhanvien INT(6) UNSIGNED,
FOREIGN KEY (manhanvien)
REFERENCES nhanvien(manhanvien),
ngayban datetime,
tongtien int 
) ' (line 180): No database selected
Error executing 'create table chitiethoadon
(
machitiethoadon  INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
mahoadon   INT(6) UNSIGNED,
FOREIGN KEY (mahoadon)
REFERENCES hoadon(mahoadon),
machitietsanpham varchar(30),
FOREIGN KEY (machitietsanpham)
REFERENCES chitietsanpham(machitietsanpham),
soluongmua int,
thanhtien int
) ' (line 193): No database selected
Error executing 'create table khachhang
(
sodienthoai char(15) PRIMARY KEY,
tenkhachhang nvarchar(50)
) ' (line 199): No database selected
Error executing 'create table chitietkhachhang
(
machitietkhachhang  INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
sodienthoai char(15),
FOREIGN KEY (sodienthoai)
REFERENCES khachhang(sodienthoai),
mahoadon   INT(6) UNSIGNED,
FOREIGN KEY (mahoadon)
REFERENCES hoadon(mahoadon)
) ' (line 211): No database selected
Error executing 'CREATE TABLE dangnhap(
tentaikhoan varchar(55) not null primary key,
matkhau varchar(55) not null,
phanquyen int not null,
manhanvien INT(6) UNSIGNED,
FOREIGN KEY (manhanvien)
REFERENCES nhanvien(manhanvien)
) ' (line 220): No database selected
Error executing 'create table doitra
(
madoitra INT NOT NULL PRIMARY KEY auto_increment,
mahoadon INT(6) unsigned,
ngaytra datetime,
lydo nvarchar(300),
FOREIGN KEY (mahoadon)
REFERENCES hoadon(mahoadon)
) ' (line 230): No database selected
Error executing 'create table chitietdoitra
(
machitietdoitra INT NOT NULL PRIMARY KEY auto_increment,
madoitra int,
machitietsanpham varchar(45),
soluong int(6),
FOREIGN KEY (machitietsanpham)
REFERENCES chitietsanpham(machitietsanpham),
FOREIGN KEY (madoitra)
REFERENCES doitra(madoitra)
) ' (line 242): No database selected
Error executing 'create table hoadondoitra
(
mahoadondoitra INT NOT NULL PRIMARY KEY auto_increment,
madoitra INT(6),
thanhtien int(6),
FOREIGN KEY (madoitra)
REFERENCES doitra(madoitra)
) ' (line 251): No database selected
Error executing 'create table chitiethoadondoitra
(
machitiethoadondoitra INT NOT NULL PRIMARY KEY auto_increment,
mahoadondoitra INT,
machitietsanpham varchar(45),
soluong int(6),
thanhtien int,
FOREIGN KEY (machitietsanpham)
REFERENCES chitietsanpham(machitietsanpham),
FOREIGN KEY (mahoadondoitra)
REFERENCES hoadondoitra(mahoadondoitra)
) ' (line 264): No database selected
Error executing 'DROP TRIGGER IF EXISTS before_nhanvien_delete ' (line 266): No database selected
Error executing 'create trigger before_nhanvien_delete
before delete ON nhanvien
for each row
	delete from dangnhap 
    	where dangnhap.manhanvien = old.manhanvien ' (line 272): No database selected
Error executing 'DROP TRIGGER IF EXISTS before_hoadonmuahang_delete ' (line 274): No database selected
Error executing 'create trigger before_hoadonmuahang_delete 
before delete ON hoadonmuahang
for each row
	delete from chitiethoadonmuahang 
    where chitiethoadonmuahang.mahoadonmuahang=old.mahoadonmuahang ' (line 280): No database selected
Error executing 'DROP TRIGGER IF EXISTS before_sanpham_delete ' (line 282): No database selected
Error executing 'create trigger before_sanpham_delete 
before delete ON sanpham
for each row
	delete from chitietsanpham 
    where chitietsanpham.masanpham=old.masanpham and old.giaban is null ' (line 287): No database selected
Error executing 'DROP TRIGGER IF EXISTS before_hoadon_delete ' (line 289): No database selected
Error executing 'create trigger before_hoadon_delete 
before delete ON hoadon
for each row
BEGIN
	delete from chitiethoadon 
    where chitiethoadon.mahoadon=old.mahoadon;    
    delete from chitietkhachhang
    where chitietkhachhang.mahoadon = old.mahoadon;
END ' (line 299): No database selected
Error executing 'drop PROCEDURE IF EXISTS update_soluong_ctsp_sauthanhtoan ' (line 302): No database selected
Error executing 'CREATE PROCEDURE update_soluong_ctsp_sauthanhtoan(IN mactsp varchar(33), in soluongmua int)
BEGIN
	Declare soluongsp int default 0;
    set soluongsp= (select soluong from chitietsanpham where machitietsanpham=mactsp) - soluongmua;
    update chitietsanpham
    set soluong=soluongsp
    where machitietsanpham = mactsp;
END;  ' (line 311): No database selected
Error executing 'drop PROCEDURE IF EXISTS update_soluong_ctsp_huythanhtoan ' (line 314): No database selected
Error executing 'CREATE PROCEDURE update_soluong_ctsp_huythanhtoan(IN mactsp varchar(33), in soluongmua int)
BEGIN
	Declare soluongsp int default 0;
    set soluongsp= (select soluong from chitietsanpham where machitietsanpham=mactsp) + soluongmua;
    update chitietsanpham
    set soluong=soluongsp
    where machitietsanpham = mactsp;
END;  ' (line 323): No database selected
Error executing 'drop PROCEDURE if exists soluongban_theoquy ' (line 327): No database selected
Error executing 'CREATE PROCEDURE soluongban_theoquy(in quy int, in nam int)
BEGIN
DECLARE x int;
DECLARE y int;
if quy = 1 then set x=1;
elseif quy =2 then set x=4;
elseif quy = 3 then set x=7;
else set x = 10;
end if;
set y= x+2;
select  sp.masanpham, sp.tensanpham, sum(soluongmua),
sum(soluongmua)*sp.giaban as tongdoanhthu
from chitiethoadon cthd, hoadon hd, chitietsanpham ctsp, sanpham sp
where cthd.mahoadon=hd.mahoadon and ctsp.masanpham=sp.masanpham 
and cthd.machitietsanpham=ctsp.machitietsanpham 
and month(ngayban) >=  x  and  month(ngayban) <=  y
and  year(ngayban) = nam
group by sp.masanpham 
order by sum(soluongmua) desc
limit 5;
END;  ' (line 349): No database selected
Error executing 'call soluongban_theoquy(1,2018) ' (line 351): No database selected
Error executing 'CREATE FUNCTION getTongsoluong_quy(quy int, nam int)
    RETURNS int
    BEGIN
	declare tongsoluong int default 0;
	DECLARE x int;
	DECLARE y int;
	if quy = 1 then set x=1;
	elseif quy =2 then set x=4;
	elseif quy = 3 then set x=7;
	else set x = 10;
	end if;
	set y= x+2;
    set tongsoluong = (select sum(soluongmua) from chitiethoadon cthd, hoadon hd 
	where cthd.mahoadon=hd.mahoadon and year(ngayban) = nam
	and month(ngayban) >=  x  and  month(ngayban) <=  y);
    RETURN tongsoluong ;
    END ' (line 369): No database selected
Error executing 'drop PROCEDURE if exists tonkholau ' (line 372): No database selected
Error executing 'CREATE PROCEDURE tonkholau()
BEGIN
END;  ' (line 377): No database selected
Error executing 'drop procedure if exists tonkho_hangton ' (line 380): No database selected
Error executing 'CREATE PROCEDURE tonkho_hangton(in chucnang int)
BEGIN
if chucnang=1 then
select sp.masanpham,sp.tensanpham,sp.tonkhotoithieu,
(select sum(soluong) from chitietsanpham ctsp where ctsp.masanpham=sp.masanpham),
sp.tonkhotoida
from sanpham sp;
elseif chucnang=2 then
select sp.masanpham,sp.tensanpham,sp.tonkhotoithieu, sum(soluong) as sl,
sp.tonkhotoida
from sanpham sp,chitietsanpham ctsp
where ctsp.masanpham = sp.masanpham
group by sp.masanpham
having sl>0;
elseif chucnang=3 then
select sp.masanpham,sp.tensanpham,sp.tonkhotoithieu,soluong,sp.tonkhotoida
from sanpham sp
left join  chitietsanpham ctsp on ctsp.masanpham=sp.masanpham
where soluong is null;
elseif chucnang=4 then
select sp.masanpham,sp.tensanpham,sp.tonkhotoithieu, sum(soluong) as sl,
sp.tonkhotoida
from sanpham sp,chitietsanpham ctsp
where ctsp.masanpham = sp.masanpham
group by sp.masanpham
having sl=0;
elseif chucnang=5 then
select sp.masanpham,sp.tensanpham,sp.tonkhotoithieu, sum(soluong) as sl,
sp.tonkhotoida
from sanpham sp,chitietsanpham ctsp
where ctsp.masanpham = sp.masanpham
group by sp.masanpham
having sl < sp.tonkhotoithieu and  sl>0;
elseif chucnang=6 then
select sp.masanpham,sp.tensanpham,sp.tonkhotoithieu, sum(soluong) as sl,
sp.tonkhotoida
from sanpham sp,chitietsanpham ctsp
where ctsp.masanpham = sp.masanpham
group by sp.masanpham
having sl > sp.tonkhotoida;
elseif chucnang=7 then
select sp.masanpham,sp.tensanpham,sp.tonkhotoithieu,
(select sum(soluong) from chitietsanpham ctsp where ctsp.masanpham=sp.masanpham) as sl,
sp.tonkhotoida, max(date_format(pn.ngaynhap,'%d/%m/%y')) as ngaynhap,sp.ngayhethan
from sanpham sp, chitiethoadonmuahang ctpn, hoadonmuahang pn
where ctpn.masanpham = sp.masanpham and pn.mahoadonmuahang=ctpn.mahoadonmuahang
group by sp.masanpham
having date(now()) >= ngayhethan and sl > 0;
End if;
END;  ' (line 445): No database selected
Error executing 'drop PROCEDURE if exists update_ngayhethan_sp ' (line 448): No database selected
Error executing 'CREATE PROCEDURE update_ngayhethan_sp(in mapn int, in masp char(8) )
BEGIN
declare ngay Date;
declare thoihan int;
set thoihan = (select thoihan_thang from sanpham where masanpham=masp);
set ngay = (select Date(ngaynhap) from hoadonmuahang where mahoadonmuahang = mapn);
update sanpham 
set ngayhethan=DATE_ADD(ngay, INTERVAL thoihan MONTH) 
where masanpham=masp;
END;  ' (line 459): No database selected
Error executing '' (line 460): Can not issue empty query.

-------
07/01/2018 11:01:22
-------

Error executing '' (line 458): Can not issue empty query.

-------
07/01/2018 11:01:55
-------

Error executing '' (line 458): Can not issue empty query.

-------
07/03/2018 11:03:28
-------

